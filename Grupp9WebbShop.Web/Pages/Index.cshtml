@page
@model IndexModel
@{
    ViewData["Title"] = "Hem";
}

<div>
    <img style="width:100%" src="~/images/sloganbild.png" alt="My Sweets, där fikat alltid är ett klick bort" />


</div>

<div class="text-center mt-5">
    <h2 style="font-family:Thonburi-bold;color:#642714">Våra kunders storfavoriter</h2>
</div>
<div class="row justify-content-center mt-5 g-0 brownandthin" id="highlighted" >

    @foreach (var prod in Model.BestSellingProducts)
    {

        <div class="col-3" style="max-width: none;">
            <div class="card border-0" style="background-color: #E0D4C7; width: 14rem;height:24rem">
                <a class="text-decoration-none text-body" asp-page="/ProductDetails" asp-route-productID="@prod.Id">
                    <img class="card-img-top" style="border:3px solid #FAB0C8;" src="~/images/@prod.ImageFile" alt="@prod.ImageDescription">
                </a>
                <div class="card-body flex-grow-0 text-center pink-border pr-1 pl-1" style=" border-top: none; border-bottom: none; height: 90px; background-color: white; color: #642714; font-family: Thonburi-bold">
                    <h5 class="card-title">@prod.Name</h5>
                </div>
                <div class="card-body text-center overflow-hidden pt-0 pb-0 flex-grow-0 pink-border" style="border-top:none;border-bottom:none; height:40px;background-color: white;color:#642714;font-family:Thonburi-bold">



                    @if (prod.OnSale)
                    {
                        <h5 class="card-text text-">
                            <del class="mr-2" style="color:#CF7697">@Math.Round(prod.Price, 0)  kr </del>

                            @prod.CalculatedPrice
                            kr
                        </h5>

                    }
                    else
                    {
                        <h5 class="card-text ">
                            @prod.CalculatedPrice kr

                        </h5>
                    }





                </div>
                <div class="card-footer text-center pink-border" style="border-top:none; background-color: white;color:#642714;font-family:Thonburi-bold">
                    <span class="card-text"></span>
                    <select name="number" id=@($"S{@prod.Id}")>
                        @for (int i = 1; i < 11; i++)
                        {
                            <option value="@i">@i</option>
                        }
                    </select>


                    <button class="border-0" onclick="buy(@prod.Id)" style="background-color:#CF7697; color:#642714;">Köp</button>
                </div>
            </div>
        </div>

    }

</div>






<div class="text-center mt-5">
    <h2 style="font-family:Thonburi-bold;color:#642714">Säsongens bästa</h2>
</div>
<div class="row justify-content-sm-around mt-5 g-0" id="highlighted" style="margin:auto; width:80%; background-color: #E0D4C7;">




    <div id="carouselExampleIndicators" class="carousel slide my-3 box-shadow" data-ride="carousel" data-interval="4000">

        <div class="carousel-inner">

            @foreach (var prod in Model.Highlighted)
            {

                @if (Model.Highlighted.First() == prod)
                {
                    <div class="carousel-item active">

                        <div class="card mb-3" style="background-color: #E0D4C7;max-width: 540px; ">
                            <div class="row no-gutters">
                                <div class="col-md-8">
                                    <a class="text-decoration-none text-body" asp-page="/ProductDetails" asp-route-productID="@prod.Id">

                                        <img class="card-img" src="~/images/@prod.ImageFile" alt="@prod.ImageDescription">
                                    </a>
                                </div>
                                <div class="col-md-4" style=" background-color: white; color: #642714; font-family: Thonburi-bold">
                                    <div class="card-body text-center">
                                        <h5 class="card-title">@prod.Name</h5>
                                    </div>
                                    <div class="card-body text-center" style="background-color: white;color:#642714;font-family:Thonburi-bold">



                                        @if (prod.OnSale)
                                        {
                                            <h5 class="card-text text-">
                                                <del class="mr-2" style="color:#CF7697">@Math.Round(prod.Price, 0)  kr </del>

                                                @prod.CalculatedPrice
                                                kr
                                            </h5>

                                        }
                                        else
                                        {
                                            <h5 class="card-text ">
                                                @Math.Round(prod.Price, 0) kr

                                            </h5>
                                        }





                                    </div>
                                    <div class="text-center" style="background-color: white;color:#642714;font-family:Thonburi-bold">
                                        <span class="card-text"></span>
                                        <select name="number" id=@($"S{@prod.Id}")>
                                            @for (int i = 1; i < 11; i++)
                                            {
                                                <option value="@i">@i</option>
                                            }
                                        </select>


                                        <button class="border-0" onclick="buy(@prod.Id)" style="background-color:#CF7697; color:#642714;">Köp</button>
                                    </div>


                                </div>

                            </div>
                        </div>
                    </div>
                }
                else
                {
                    <div class="carousel-item">

                        <div class="card mb-3" style="background-color: #E0D4C7;max-width: 540px; ">
                            <div class="row no-gutters">
                                <div class="col-md-8">
                                    <a class="text-decoration-none text-body" asp-page="/ProductDetails" asp-route-productID="@prod.Id">

                                        <img class="card-img" src="~/images/@prod.ImageFile" alt="@prod.ImageDescription">
                                    </a>
                                </div>
                                <div class="col-md-4" style=" background-color: white; color: #642714; font-family: Thonburi-bold">
                                    <div class="card-body text-center">
                                        <h5 class="card-title">@prod.Name</h5>
                                    </div>
                                    <div class="card-body text-center" style="background-color: white;color:#642714;font-family:Thonburi-bold">



                                        @if (prod.OnSale)
                                        {
                                            <h5 class="card-text text-">
                                                <del class="mr-2" style="color:#CF7697">@Math.Round(prod.Price, 0)  kr </del>

                                                @prod.CalculatedPrice
                                                kr
                                            </h5>

                                        }
                                        else
                                        {
                                            <h5 class="card-text ">
                                                @Math.Round(prod.Price, 0) kr

                                            </h5>
                                        }





                                    </div>
                                    <div class="text-center" style="background-color: white;color:#642714;font-family:Thonburi-bold">
                                        <span class="card-text"></span>
                                        <select name="number" id=@($"S{@prod.Id}")>
                                            @for (int i = 1; i < 11; i++)
                                            {
                                                <option value="@i">@i</option>
                                            }
                                        </select>


                                        <button class="border-0" onclick="buy(@prod.Id)" style="background-color:#CF7697; color:#642714;">Köp</button>
                                    </div>


                                </div>

                            </div>
                        </div>
                    </div>

                }


            }

        </div>
    </div>
</div>



<div class="text-center mt-5">
    <h2 style="font-family:Thonburi-bold;color:#642714">Färskt från bageriet</h2>
</div>
<div class="row justify-content-center mt-5 g-0 brownandthin" id="highlighted" >

    @foreach (var prod in Model.Latest)
    {

        <div class="col-3" style="max-width: none;">
            <div class="card border-0" style="background-color: #E0D4C7; width: 14rem;height:24rem">
                <a class="text-decoration-none text-body" asp-page="/ProductDetails" asp-route-productID="@prod.Id">
                    <img class="card-img-top" style="border:3px solid #FAB0C8;" src="~/images/@prod.ImageFile" alt="@prod.ImageDescription">
                </a>
                <div class="card-body flex-grow-0 text-center pink-border pr-1 pl-1" style=" border-top: none; border-bottom: none; height: 90px; background-color: white; color: #642714; font-family: Thonburi-bold">
                    <h5 class="card-title">@prod.Name</h5>
                </div>
                <div class="card-body text-center overflow-hidden pt-0 pb-0 flex-grow-0 pink-border" style="border-top:none;border-bottom:none; height:40px;background-color: white;color:#642714;font-family:Thonburi-bold">



                    @if (prod.OnSale)
                    {
                        <h5 class="card-text text-">
                            <del class="mr-2" style="color:#CF7697">@Math.Round(prod.Price, 0)  kr </del>

                            @prod.CalculatedPrice
                            kr
                        </h5>

                    }
                    else
                    {
                        <h5 class="card-text ">
                            @prod.CalculatedPrice kr

                        </h5>
                    }





                </div>
                <div class="card-footer text-center pink-border" style="border-top:none; background-color: white;color:#642714;font-family:Thonburi-bold">
                    <span class="card-text"></span>
                    <select name="number" id=@($"S{@prod.Id}")>
                        @for (int i = 1; i < 11; i++)
                        {
                            <option value="@i">@i</option>
                        }
                    </select>


                    <button class="border-0" onclick="buy(@prod.Id)" style="background-color:#CF7697; color:#642714;">Köp</button>
                </div>
            </div>
        </div>

    }

</div>

<div class="text-center mt-5">
    <h2 style="font-family:Thonburi-bold;color:#642714">
        Kort datum
    </h2>
</div>

<div class="row justify-content-center mt-5 g-0 brownandthin" id="highlighted">

    @foreach (var prod in Model.OnSale)
    {

        <div class="col-3" style="max-width: none;">
            <div class="card border-0" style="background-color: #E0D4C7; width: 14rem;height:24rem">
                <a class="text-decoration-none text-body" asp-page="/ProductDetails" asp-route-productID="@prod.Id">
                    <img class="card-img-top" style="border:3px solid #FAB0C8;" src="~/images/@prod.ImageFile" alt="@prod.ImageDescription">
                </a>
                <div class="card-body flex-grow-0 text-center pink-border pr-1 pl-1" style=" border-top: none; border-bottom: none; height: 90px; background-color: white; color: #642714; font-family: Thonburi-bold">
                    <h5 class="card-title">@prod.Name</h5>
                </div>
                <div class="card-body text-center overflow-hidden pt-0 pb-0 flex-grow-0 pink-border" style="border-top:none;border-bottom:none; height:40px;background-color: white;color:#642714;font-family:Thonburi-bold">



                    @if (prod.OnSale)
                    {
                        <h5 class="card-text text-">
                            <del class="mr-2" style="color:#CF7697">@Math.Round(prod.Price, 0)  kr </del>

                            @prod.CalculatedPrice
                            kr
                        </h5>

                    }
                    else
                    {
                        <h5 class="card-text ">
                            @prod.CalculatedPrice kr

                        </h5>
                    }





                </div>
                <div class="card-footer text-center pink-border" style="border-top:none; background-color: white;color:#642714;font-family:Thonburi-bold">
                    <span class="card-text"></span>
                    <select name="number" id=@($"S{@prod.Id}")>
                        @for (int i = 1; i < 11; i++)
                        {
                            <option value="@i">@i</option>
                        }
                    </select>


                    <button class="border-0" onclick="buy(@prod.Id)" style="background-color:#CF7697; color:#642714;">Köp</button>
                </div>
            </div>
        </div>

    }

</div>




<form method="post" id="myHiddenForm">

    <input type="hidden" id="productId" asp-for="ProductId" />
    <input type="hidden" id="amount" asp-for="Number" />

</form>

@if (Model.Animate)
{
    <script>
        let cartImg = document.getElementById("cartImg");
        cartImg.classList.add('animate-cart');
        let highlighted = document.getElementById('highlighted');
        setTimeout(function () {
            highlighted.scrollIntoView({ behavior: 'smooth' });
        }, 1000);

    </script>
}

<script>
    function buy(id) {

        const selectId = "S" + id;

        const mySelect = document.getElementById(selectId);
        const hiddenForm = document.getElementById("myHiddenForm");
        const hiddenId = document.getElementById("productId");
        const hiddenAmount = document.getElementById("amount");

        hiddenId.value = id;
        hiddenAmount.value = mySelect.value;

        hiddenForm.submit();




    }

</script>

